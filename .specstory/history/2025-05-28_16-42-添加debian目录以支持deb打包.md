<!-- Generated by SpecStory -->

# æ·»åŠ Debianç›®å½•ä»¥æ”¯æŒDebæ‰“åŒ… (2025-05-29 00:42:56)

_**User**_

ä¸ºé¡¹ç›®æ·»åŠ debianç›®å½•ï¼Œåš deb æ‰“åŒ…æ”¯æŒ

---

_**Assistant**_

æˆ‘æ¥ä¸ºé¡¹ç›®æ·»åŠ debianç›®å½•ï¼Œä»¥æ”¯æŒdebæ‰“åŒ…ã€‚é¦–å…ˆè®©æˆ‘äº†è§£ä¸€ä¸‹é¡¹ç›®çš„ç»“æ„å’Œé…ç½®ã€‚

---

<details>
            <summary>Listed current directory â€¢ **17** results</summary>
        
| Name |
|-------|
| ğŸ“ `.git` |
| ğŸ“ `.github` |
| ğŸ“ `docs` |
| ğŸ“„ `qml.qrc` |
| ğŸ“„ `CMakeLists.txt` |
| ğŸ“ `qml` |
| ğŸ“ `.specstory` |
| ğŸ“ `tests` |
| ğŸ“„ `README.md` |
| ğŸ“„ `.gitattributes` |
| ğŸ“„ `.gitignore` |
| ğŸ“ `src` |
| ğŸ“ `resources` |
| ğŸ“ `translations` |
| ğŸ“ `.cursor` |
| ğŸ“„ `.cursorindexingignore` |
| ğŸ“„ `LICENSE` |

</details>

---

Read file: CMakeLists.txt

---

Read file: docs/PRD.md

---

Read file: README.md

---

ç°åœ¨æˆ‘æ¥åˆ›å»ºdebianç›®å½•å’Œç›¸å…³çš„æ‰“åŒ…æ–‡ä»¶ã€‚åŸºäºé¡¹ç›®ä¿¡æ¯ï¼Œæˆ‘å°†åˆ›å»ºä¸€ä¸ªæ ‡å‡†çš„debianæ‰“åŒ…é…ç½®ã€‚

---

```diff
- 
+ Source: cleanmydeepin
+ Section: utils
+ Priority: optional
+ Maintainer: Deepin Packages Builder <packages@deepin.org>
+ Build-Depends: debhelper-compat (= 13),
+                cmake (>= 3.14),
+                qt6-base-dev,
+                qt6-declarative-dev,
+                qt6-tools-dev,
+                qt6-l10n-tools
+ Standards-Version: 4.6.0
+ Homepage: https://github.com/deepin-community/cleanmydeepin
+ Vcs-Git: https://github.com/deepin-community/cleanmydeepin.git
+ Vcs-Browser: https://github.com/deepin-community/cleanmydeepin
+ 
+ Package: cleanmydeepin
+ Architecture: any
+ Depends: ${shlibs:Depends}, ${misc:Depends}
+ Description: System cleaning tool for deepin
+  CleanMyDeepin is a system cleaning tool specifically designed for deepin
+  operating system users. It helps users efficiently and conveniently clean
+  useless files in the system (such as cache, log, coredump, etc.), free up
+  disk space, and improve system running efficiency.
+  .
+  Features:
+   * Smart scanning of system temporary files, log files, cache files
+   * Tree-like display of scan results with expand/collapse support
+   * Selective cleaning with individual file selection and select all/deselect all
+   * Real-time progress display during scanning and cleaning
+   * Safety protection with confirmation mechanism to avoid accidental deletion
```

---

```diff
- 
+ #!/usr/bin/make -f
+ 
+ %:
+ 	dh $@
+ 
+ override_dh_auto_configure:
+ 	dh_auto_configure -- \
+ 		-DCMAKE_BUILD_TYPE=Release \
+ 		-DCMAKE_INSTALL_PREFIX=/usr
+ 
+ override_dh_auto_install:
+ 	dh_auto_install
+ 	# å®‰è£…desktopæ–‡ä»¶
+ 	install -D -m 644 debian/cleanmydeepin.desktop \
+ 		$(CURDIR)/debian/cleanmydeepin/usr/share/applications/cleanmydeepin.desktop
+ 	# å®‰è£…å›¾æ ‡
+ 	install -D -m 644 resources/icons/cleanmydeepin.png \
+ 		$(CURDIR)/debian/cleanmydeepin/usr/share/pixmaps/cleanmydeepin.png
```

---

```diff
- 
+ cleanmydeepin (1.0.0-1) unstable; urgency=medium
+ 
+   * Initial release
+   * Smart scanning of system temporary files, log files, cache files
+   * Tree-like display of scan results with expand/collapse support
+   * Selective cleaning with individual file selection
+   * Real-time progress display during scanning and cleaning
+   * Safety protection with confirmation mechanism
+ 
+  -- Deepin Packages Builder <packages@deepin.org>  Mon, 30 Dec 2024 10:00:00 +0800
```

---

```diff
- 
+ 13
```

---

```diff
- 
+ Format: https://www.debian.org/doc/packaging-manuals/copyright-format/1.0/
+ Upstream-Name: cleanmydeepin
+ Upstream-Contact: Deepin Community <packages@deepin.org>
+ Source: https://github.com/deepin-community/cleanmydeepin
+ 
+ Files: *
+ Copyright: 2024 Deepin Community
+ License: Apache-2.0
+ 
+ Files: debian/*
+ Copyright: 2024 Deepin Packages Builder <packages@deepin.org>
+ License: Apache-2.0
+ 
+ License: Apache-2.0
+  Licensed under the Apache License, Version 2.0 (the "License");
+  you may not use this file except in compliance with the License.
+  You may obtain a copy of the License at
+  .
+  http://www.apache.org/licenses/LICENSE-2.0
+  .
+  Unless required by applicable law or agreed to in writing, software
+  distributed under the License is distributed on an "AS IS" BASIS,
+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+  See the License for the specific language governing permissions and
+  limitations under the License.
+  .
+  On Debian systems, the complete text of the Apache License 2.0 can be
+  found in "/usr/share/common-licenses/Apache-2.0".
```

---

```diff
- 
+ [Desktop Entry]
+ Name=CleanMyDeepin
+ Name[zh_CN]=æ·±åº¦æ¸…ç†
+ Comment=System cleaning tool for deepin
+ Comment[zh_CN]=ä¸“ä¸ºdeepinè®¾è®¡çš„ç³»ç»Ÿæ¸…ç†å·¥å…·
+ Exec=cleanmydeepin
+ Icon=cleanmydeepin
+ Terminal=false
+ Type=Application
+ Categories=System;Utility;
+ Keywords=clean;system;cache;log;temp;
+ Keywords[zh_CN]=æ¸…ç†;ç³»ç»Ÿ;ç¼“å­˜;æ—¥å¿—;ä¸´æ—¶æ–‡ä»¶;
+ StartupNotify=true
```

---

```diff
- 
+ 3.0 (quilt)
```

---

```diff
- 
+ # å¯æ‰§è¡Œæ–‡ä»¶å·²é€šè¿‡CMakeå®‰è£…è§„åˆ™å¤„ç†
+ # å¦‚æœæœ‰å…¶ä»–éœ€è¦å®‰è£…çš„æ–‡ä»¶ï¼Œå¯ä»¥åœ¨è¿™é‡ŒæŒ‡å®š
+ # ä¾‹å¦‚ï¼š
+ # resources/icons/* usr/share/cleanmydeepin/icons/
+ # translations/*.qm usr/share/cleanmydeepin/translations/
```

---

ç°åœ¨è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹resourcesç›®å½•æ˜¯å¦å­˜åœ¨å›¾æ ‡æ–‡ä»¶ï¼Œå¦‚æœä¸å­˜åœ¨éœ€è¦åˆ›å»ºä¸€ä¸ªç®€å•çš„å›¾æ ‡ã€‚

---

<details>
            <summary>Listed directory resources â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“ `icons` |

</details>

---

<details>
            <summary>Listed directory resources/icons â€¢ **0** results</summary>
        
No results found
</details>

---

å›¾æ ‡ç›®å½•æ˜¯ç©ºçš„ï¼Œæˆ‘éœ€è¦ä¿®æ”¹debian/rulesæ–‡ä»¶ï¼Œç§»é™¤å¯¹ä¸å­˜åœ¨å›¾æ ‡çš„å¼•ç”¨ï¼Œæˆ–è€…åˆ›å»ºä¸€ä¸ªå ä½ç¬¦ã€‚è®©æˆ‘å…ˆä¿®æ”¹rulesæ–‡ä»¶ï¼š

---

```diff
  	install -D -m 644 debian/cleanmydeepin.desktop \
  		$(CURDIR)/debian/cleanmydeepin/usr/share/applications/cleanmydeepin.desktop
- 	# å®‰è£…å›¾æ ‡
+ 	# å¦‚æœå›¾æ ‡æ–‡ä»¶å­˜åœ¨åˆ™å®‰è£…
+ 	if [ -f resources/icons/cleanmydeepin.png ]; then \
  		install -D -m 644 resources/icons/cleanmydeepin.png \
- 		$(CURDIR)/debian/cleanmydeepin/usr/share/pixmaps/cleanmydeepin.png
+ 			$(CURDIR)/debian/cleanmydeepin/usr/share/pixmaps/cleanmydeepin.png; \
+ 	fi
```

---

ç°åœ¨è®©æˆ‘åˆ›å»ºä¸€ä¸ªæ„å»ºè„šæœ¬ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œdebæ‰“åŒ…ï¼š

---

```diff
- 
+ #!/bin/bash
+ 
+ # CleanMyDeepin DEB æ‰“åŒ…è„šæœ¬
+ # ä½¿ç”¨æ–¹æ³•: ./scripts/build-deb.sh
+ 
+ set -e
+ 
+ # é¢œè‰²å®šä¹‰
+ RED='\033[0;31m'
+ GREEN='\033[0;32m'
+ YELLOW='\033[1;33m'
+ NC='\033[0m' # No Color
+ 
+ # æ—¥å¿—å‡½æ•°
+ log_info() {
+     echo -e "${GREEN}[INFO]${NC} $1"
+ }
+ 
+ log_warn() {
+     echo -e "${YELLOW}[WARN]${NC} $1"
+ }
+ 
+ log_error() {
+     echo -e "${RED}[ERROR]${NC} $1"
+ }
+ 
+ # æ£€æŸ¥ä¾èµ–
+ check_dependencies() {
+     log_info "Checking build dependencies..."
+ 
+     local missing_deps=()
+ 
+     # æ£€æŸ¥å¿…è¦çš„æ„å»ºå·¥å…·
+     for cmd in dpkg-buildpackage debhelper cmake; do
+         if ! command -v $cmd &> /dev/null; then
+             missing_deps+=($cmd)
+         fi
+     done
+ 
+     # æ£€æŸ¥Qt6å¼€å‘åŒ…
+     if ! dpkg -l | grep -q qt6-base-dev; then
+         missing_deps+=("qt6-base-dev")
+     fi
+ 
+     if ! dpkg -l | grep -q qt6-declarative-dev; then
+         missing_deps+=("qt6-declarative-dev")
+     fi
+ 
+     if [ ${#missing_deps[@]} -ne 0 ]; then
+         log_error "Missing dependencies: ${missing_deps[*]}"
+         log_info "Please install them with:"
+         echo "sudo apt update"
+         echo "sudo apt install ${missing_deps[*]}"
+         exit 1
+     fi
+ 
+     log_info "All dependencies are satisfied"
+ }
+ 
+ # æ¸…ç†æ„å»ºç›®å½•
+ clean_build() {
+     log_info "Cleaning previous build artifacts..."
+     rm -rf debian/.debhelper
+     rm -rf debian/cleanmydeepin
+     rm -rf debian/files
+     rm -rf debian/*.log
+     rm -rf debian/*.substvars
+     rm -rf ../cleanmydeepin_*
+ }
+ 
+ # æ„å»ºdebåŒ…
+ build_package() {
+     log_info "Building DEB package..."
+ 
+     # ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
+     if [ ! -f "debian/control" ]; then
+         log_error "debian/control not found. Please run this script from project root."
+         exit 1
+     fi
+ 
+     # æ„å»ºåŒ…
+     dpkg-buildpackage -us -uc -b
+ 
+     if [ $? -eq 0 ]; then
+         log_info "Build completed successfully!"
+         log_info "DEB packages are located in parent directory:"
+         ls -la ../*.deb 2>/dev/null || log_warn "No .deb files found"
+     else
+         log_error "Build failed!"
+         exit 1
+     fi
+ }
+ 
+ # ä¸»å‡½æ•°
+ main() {
+     log_info "Starting CleanMyDeepin DEB package build..."
+ 
+     check_dependencies
+     clean_build
+     build_package
+ 
+     log_info "Build process completed!"
+ }
+ 
+ # è¿è¡Œä¸»å‡½æ•°
+ main "$@"
```

---

```bash
chmod +x scripts/build-deb.sh
```

```
âœ  cleanmydeepin git:(main) âœ— 

```

---

ç°åœ¨è®©æˆ‘åˆ›å»ºä¸€ä¸ªREADMEæ–‡æ¡£æ¥è¯´æ˜å¦‚ä½•ä½¿ç”¨debianæ‰“åŒ…ï¼š

---

```diff
- 
+ # CleanMyDeepin Debian æ‰“åŒ…è¯´æ˜
+ 
+ æœ¬ç›®å½•åŒ…å«äº† CleanMyDeepin é¡¹ç›®çš„ Debian æ‰“åŒ…é…ç½®æ–‡ä»¶ï¼Œç”¨äºç”Ÿæˆ `.deb` å®‰è£…åŒ…ã€‚
+ 
+ ## æ–‡ä»¶è¯´æ˜
+ 
+ - `control` - åŒ…çš„åŸºæœ¬ä¿¡æ¯ã€ä¾èµ–å…³ç³»å’Œæè¿°
+ - `rules` - æ„å»ºè§„åˆ™ï¼Œå®šä¹‰å¦‚ä½•ç¼–è¯‘å’Œå®‰è£…è½¯ä»¶
+ - `changelog` - ç‰ˆæœ¬å˜æ›´å†å²è®°å½•
+ - `compat` - debhelper å…¼å®¹æ€§çº§åˆ«
+ - `copyright` - ç‰ˆæƒä¿¡æ¯å£°æ˜
+ - `cleanmydeepin.desktop` - æ¡Œé¢åº”ç”¨ç¨‹åºå…¥å£æ–‡ä»¶
+ - `source/format` - æºç åŒ…æ ¼å¼å£°æ˜
+ - `install` - é¢å¤–å®‰è£…æ–‡ä»¶é…ç½®ï¼ˆå¯é€‰ï¼‰
+ 
+ ## æ„å»ºè¦æ±‚
+ 
+ ### ç³»ç»Ÿè¦æ±‚
+ - Debian 11+ æˆ– Ubuntu 20.04+
+ - æ”¯æŒçš„æ¶æ„ï¼šamd64, arm64
+ 
+ ### æ„å»ºä¾èµ–
+ ```bash
+ sudo apt update
+ sudo apt install \
+     debhelper-compat \
+     cmake \
+     qt6-base-dev \
+     qt6-declarative-dev \
+     qt6-tools-dev \
+     qt6-l10n-tools \
+     build-essential
+ ```
+ 
+ ## æ„å»ºæ–¹æ³•
+ 
+ ### æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ„å»ºè„šæœ¬ï¼ˆæ¨èï¼‰
+ ```bash
+ # åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
+ ./scripts/build-deb.sh
+ ```
+ 
+ ### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ„å»º
+ ```bash
+ # åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
+ dpkg-buildpackage -us -uc -b
+ ```
+ 
+ ### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ debuild
+ ```bash
+ # å®‰è£… devscripts
+ sudo apt install devscripts
+ 
+ # æ„å»º
+ debuild -us -uc -b
+ ```
+ 
+ ## æ„å»ºè¾“å‡º
+ 
+ æ„å»ºæˆåŠŸåï¼Œä¼šåœ¨ä¸Šçº§ç›®å½•ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š
+ - `cleanmydeepin_1.0.0-1_amd64.deb` - ä¸»å®‰è£…åŒ…
+ - `cleanmydeepin_1.0.0-1_amd64.changes` - å˜æ›´æ–‡ä»¶
+ - `cleanmydeepin_1.0.0-1_amd64.buildinfo` - æ„å»ºä¿¡æ¯
+ 
+ ## å®‰è£…æµ‹è¯•
+ 
+ ```bash
+ # å®‰è£…ç”Ÿæˆçš„debåŒ…
+ sudo dpkg -i ../cleanmydeepin_1.0.0-1_amd64.deb
+ 
+ # å¦‚æœæœ‰ä¾èµ–é—®é¢˜ï¼Œä¿®å¤ä¾èµ–
+ sudo apt-get install -f
+ 
+ # è¿è¡Œç¨‹åº
+ cleanmydeepin
+ 
+ # å¸è½½ï¼ˆå¦‚éœ€è¦ï¼‰
+ sudo apt remove cleanmydeepin
+ ```
+ 
+ ## åŒ…ä¿¡æ¯
+ 
+ - **åŒ…å**: cleanmydeepin
+ - **ç‰ˆæœ¬**: 1.0.0-1
+ - **æ¶æ„**: anyï¼ˆæ”¯æŒå¤šæ¶æ„ï¼‰
+ - **åˆ†ç±»**: utils
+ - **ä¾èµ–**: è‡ªåŠ¨æ£€æµ‹çš„å…±äº«åº“ä¾èµ–
+ 
+ ## æ³¨æ„äº‹é¡¹
+ 
+ 1. æ„å»ºå‰ç¡®ä¿æ‰€æœ‰ä¾èµ–å·²å®‰è£…
+ 2. å¦‚æœä¿®æ”¹äº†ç‰ˆæœ¬å·ï¼Œéœ€è¦æ›´æ–° `debian/changelog`
+ 3. å¦‚æœæ·»åŠ äº†æ–°çš„ä¾èµ–ï¼Œéœ€è¦æ›´æ–° `debian/control` ä¸­çš„ Build-Depends
+ 4. æ¡Œé¢æ–‡ä»¶ä¼šè‡ªåŠ¨å®‰è£…åˆ° `/usr/share/applications/`
+ 5. å¯æ‰§è¡Œæ–‡ä»¶ä¼šå®‰è£…åˆ° `/usr/bin/`
+ 
+ ## æ•…éšœæ’é™¤
+ 
+ ### å¸¸è§é—®é¢˜
+ 
+ 1. **Qt6 ä¾èµ–æ‰¾ä¸åˆ°**
+    ```bash
+    sudo apt install qt6-base-dev qt6-declarative-dev
+    ```
+ 
+ 2. **debhelper ç‰ˆæœ¬ä¸å…¼å®¹**
+    ```bash
+    sudo apt install debhelper-compat
+    ```
+ 
+ 3. **æƒé™é—®é¢˜**
+    ```bash
+    chmod +x debian/rules
+    ```
+ 
+ 4. **æ¸…ç†æ„å»ºæ–‡ä»¶**
+    ```bash
+    debian/rules clean
+    # æˆ–è€…
+    rm -rf debian/.debhelper debian/cleanmydeepin debian/files
+    ```
+ 
+ ## ç‰ˆæœ¬æ›´æ–°
+ 
+ æ›´æ–°ç‰ˆæœ¬æ—¶éœ€è¦ï¼š
+ 
+ 1. æ›´æ–° `debian/changelog`ï¼š
+    ```bash
+    dch -v 1.0.1-1 "New version with bug fixes"
+    ```
+ 
+ 2. ç¡®ä¿ç‰ˆæœ¬å·ä¸é¡¹ç›®ç‰ˆæœ¬ä¸€è‡´
+ 
+ 3. é‡æ–°æ„å»ºåŒ…
+ 
+ ## è´¡çŒ®
+ 
+ å¦‚æœéœ€è¦ä¿®æ”¹æ‰“åŒ…é…ç½®ï¼Œè¯·ï¼š
+ 1. æµ‹è¯•ä¿®æ”¹åçš„é…ç½®
+ 2. æ›´æ–°ç›¸å…³æ–‡æ¡£
+ 3. æäº¤ Pull Request
```

---

ç°åœ¨è®©æˆ‘æ›´æ–°ä¸»READMEæ–‡ä»¶ï¼Œæ·»åŠ debæ‰“åŒ…çš„ç›¸å…³ä¿¡æ¯ï¼š

---

Read file: README.md

---



---



---



---



---



---



---



---

